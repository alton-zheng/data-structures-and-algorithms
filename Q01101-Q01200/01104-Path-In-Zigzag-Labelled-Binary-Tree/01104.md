# 1104. äºŒå‰æ ‘å¯»è·¯
&nbsp;
æœ€è¿‘äºŒå‰æ ‘çš„é¢˜è´¼å¤šçš„å‹’...
&nbsp;
è¿™é“é¢˜ï¼ŒèŠ‚ç‚¹æŒ‰æ•°å­— $[1, 10^6]$ ï¼Œ æŒ‰è›‡å½¢åˆ†æ­¥äºä¸€é¢—å®Œå…¨äºŒå‰æ ‘ä¸­ã€‚

&nbsp;

å¹³è¡¡äºŒå‰æ•°æ¥äº†ï¼ŒğŸä¹Ÿæ¥äº†ï¼ˆå¥‡å¶æ’åˆ—ï¼‰

&nbsp;

ä»€ä¹ˆå·¦å³æ’åˆ—ï¼Œä»€ä¹ˆå³å·¦æ’åºï¼Œç»•ä¸æ¸…æ¥šä¹Ÿæ²¡æœ‰å…³ç³»ã€‚

&nbsp;

ä»Šå¤©åˆ†äº«ä¸€ç§ç®€å•æœ‰æ•ˆï¼Œä¸åˆ†å¥‡å¶ï¼Œä¸åˆ†å·¦å³çš„æ–¹æ³•

äºŒå‰æ ‘æŠ½è±¡ä¹ˆï¼Ÿ é‚£å’±ä»¬ç»“åˆå¹³è¡¡äºŒå‰æ ‘çš„ç»“æ„ï¼ˆæŠ½è±¡çš„ğŸè¡Œï¼‰ï¼Œå°†å®ƒç®€å•å…·è±¡åŒ–

&nbsp;

## æ–¹æ³•ï¼š äºŒå‰æ ‘è·¯å¾„æ¨¡æ‹Ÿ

æ€è·¯å¦‚ä¸‹ -> ã€Œç¤ºä¾‹ 1 : $label = 14$ ã€ï¼š 

- é¦–å…ˆæ‰¾åˆ° `14` æ‰€åœ¨å±‚çº§(ä¸ç”¨ç®¡å·¦å³å¦‚ä½•å¸ƒå±€)ï¼Œ ç»“è®ºï¼š $level = 4$
- æ„å»ºç»“æœé›†  $[1, 14]$â€‹â€‹â€‹â€‹ ï¼Œé¦–å°¾å…ƒç´ å·²ç»ç¡®è®¤ï¼Œä½†ä¸ºäº†æ·»åŠ ä¸­é—´å…ƒç´ ï¼Œ é¦–å…ƒç´  1ï¼Œ å…ˆä¸æ·»åŠ ï¼Œåç»­ç”¨ç›¸åŒæ¨ç†ï¼Œä¹Ÿèƒ½æ­£ç¡®æ·»åŠ å…ƒç´  `1`

- æŒ‰å¹³è¡¡äºŒå‰æ ‘çš„è§„åˆ™ï¼Œå°†å°†å®ƒä»¬æ±‚å‡ºæ¥ 
  - $[1, 7 / 2 = 3, 14/2 = 7, 14]$â€‹â€‹â€‹
- äºæ˜¯å¾—åˆ°ç»“æœé›† $[1, 3, 7, 14]$â€‹ 
- æ˜æ˜¾æ­¤æ—¶çš„ç»“æœæ˜¯ä¸å¯¹çš„ï¼Œå› ä¸ºæœ¬é¢˜å¯¹æ•°å­—é¡ºåºå¥‡å¶å±‚æ’åºå‘ç”Ÿå˜åŒ–äº†ï¼Œ é‚£ä¹ˆç°åœ¨å¦‚æœå¤„ç†å‘¢ï¼Œç®€å•ï¼š
  - æœ¬é¢˜ä¸ºä¾‹ï¼Œåªéœ€è¦å°† `7` å³å¯ã€‚
  - 7 æ‰€å¤„å±‚çº§ä¸ label å±‚çº§å¥‡å¶ä¸åŒï¼ˆ1 é™¤å¤–ï¼Œ å®ƒä¸éœ€è¦åè½¬ï¼‰ 
    - è¿™é‡Œæ³¨æ„äº†ï¼Œä¸éœ€è¦åˆ¤æ–­å®ƒæ‰€å±å±‚çº§ä¸ºå¥‡ä¸ºå¶ï¼Œåªéœ€è¦åˆ¤æ–­æ˜¯å¦ä¸€è‡´å³å¯
  - 7 ->  $(2^2 + 2^3 - 1 - 7)$â€‹â€‹â€‹â€‹  -> $3$ ä¸º 7 æ‰€å± level 
  - ç»“æœä¸º $4$
- è¿”å› res $[1,3,4,14]$â€‹â€‹

> ç‰¹æ®Šæƒ…å†µï¼Œ label ä¸º 1 æ—¶ï¼Œç›´æ¥è¿”å› ã€Œ1ã€ å³å¯
>
> ä¸éœ€è¦å¯¹ç»“æœé›†è¿›è¡Œåè½¬

&nbsp;

```java
class Solution {
    public List<Integer> pathInZigZagTree(int label) {

        List<Integer> res = new ArrayList<>();

        // ä¸ºäº†æ›´å¥½çš„ç†è§£è§£é¢˜æ€è·¯ï¼Œä¸‹é¢ä»£ç ä¸å†™çš„å¤ªæŠ½è±¡ï¼Œå°½é‡è·Ÿæ€è·¯ä¸­æè¿°çš„ä¿æŒä¸€è‡´
        // label ä¸º 1 æ—¶ï¼Œç›´æ¥è¿”å›
        if (label == 1) {
            res.add(1);
            return res;
        }

        // æ‰¾åˆ°æ‰€åœ¨å±‚çº§
        int level = 1;
        int init = 1;
        while (init << 1 <= label) {
            level++;
            init <<= 1;
        }

        // æ„å»ºå‡ºå°¾å…ƒç´ 
        res.add(label);


        for (int i = level - 1; i > 1; i--) {
            int cur = label >> 1;
            res.add(0, i % 2 != level % 2 ? (1 << (i - 1)) + (1 << i) - 1 - cur: cur);
            label = cur;
        }
        
        // æœ€åå°† 1 æ·»åŠ è¿›ç»“æœé›†
        res.add(0, 1);

        return res;

    }
}
```

```c++
class Solution {
public:
    vector<int> pathInZigZagTree(int label) {

        // ä¸ºäº†æ›´å¥½çš„ç†è§£è§£é¢˜æ€è·¯ï¼Œä¸‹é¢ä»£ç ä¸å†™çš„å¤ªæŠ½è±¡ï¼Œå°½é‡è·Ÿæ€è·¯ä¸­æè¿°çš„ä¿æŒä¸€è‡´
        // label ä¸º 1 æ—¶ï¼Œç›´æ¥è¿”å›
        if (label == 1) {
            return {1};
        }

        // æ‰¾åˆ°æ‰€åœ¨å±‚çº§
        int level = 1;
        int init = 1;
        while (init << 1 <= label) {
            level++;
            init <<= 1;
        }

        vector<int> res(level);
        // æ„å»ºå‡ºå°¾å…ƒç´ 
        res[level - 1] = label;

        // C++ vector ç±»ä¼¼ java æ•°ç»„å¤„ç†ï¼Œ å¯ä»¥æå‰å°†é¦–å…ƒç´  1 æ·»åŠ è¿›å»
        res[0] = 1;

        for (int i = level - 1; i > 1; i--) {
            int cur = label >> 1;
            res[i - 1] = i % 2 != level % 2 ? (1 << (i - 1)) + (1 << i) - 1 - cur: cur;
            label = cur;
        }

        return res;
    }
};
```

&nbsp;

### å¤æ‚åº¦åˆ†æ

æ—¶é—´å¤æ‚åº¦ï¼š $O(log(label)) $

ç©ºé—´å¤æ‚åº¦ï¼š $O(1)$

